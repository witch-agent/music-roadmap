<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø±ÙˆØ¯Ù…Ù¾ ØªØ®ØµØµÛŒ Ø¢Ù‡Ù†Ú¯Ø³Ø§Ø²ÛŒ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0a0a0f;
            --surface: #14141f;
            --surface-elevated: #1e1e2e;
            --primary: #8b5cf6;
            --primary-hover: #7c3aed;
            --accent: #f472b6;
            --text: #f8fafc;
            --text-muted: #94a3b8;
            --border: #2e2e3e;
            --success: #22c55e;
            --warning: #f59e0b;
            --error: #ef4444;
            --radius: 16px;
            --shadow: 0 25px 50px -12px rgba(139, 92, 246, 0.25);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Vazirmatn', sans-serif;
        }

        body {
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .bg-pattern {
            position: fixed;
            inset: 0;
            background: 
                radial-gradient(ellipse at 20% 20%, rgba(139, 92, 246, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(244, 114, 182, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 50%, rgba(139, 92, 246, 0.05) 0%, transparent 70%);
            pointer-events: none;
            z-index: 0;
        }

        .container {
            position: relative;
            z-index: 1;
            max-width: 520px;
            margin: 0 auto;
            padding: 24px 20px 60px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            animation: fadeInDown 0.6s ease-out;
        }

        .logo {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 32px;
            box-shadow: var(--shadow);
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .header h1 {
            font-size: 26px;
            font-weight: 900;
            background: linear-gradient(135deg, var(--text), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
        }

        .header p {
            color: var(--text-muted);
            font-size: 13px;
            font-weight: 300;
        }

        .form-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 28px;
            animation: fadeInUp 0.6s ease-out 0.1s both;
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-size: 12px;
            font-weight: 500;
            color: var(--text-muted);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        label .required {
            color: var(--error);
        }

        select, input {
            width: 100%;
            padding: 14px 16px;
            background: var(--surface-elevated);
            border: 2px solid var(--border);
            border-radius: 12px;
            color: var(--text);
            font-size: 14px;
            font-weight: 400;
            transition: all 0.3s ease;
            appearance: none;
            cursor: pointer;
        }

        select {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%2394a3b8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: left 16px center;
            background-size: 18px;
            padding-left: 44px;
        }

        select:focus, input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(139, 92, 246, 0.15);
        }

        .input-hint {
            font-size: 11px;
            color: var(--text-muted);
            margin-top: 6px;
            opacity: 0.7;
        }

        .submit-btn {
            width: 100%;
            padding: 16px;
            margin-top: 24px;
            background: linear-gradient(135deg, var(--primary), var(--primary-hover));
            border: none;
            border-radius: 14px;
            color: white;
            font-size: 15px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(139, 92, 246, 0.4);
        }

        .submit-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            width: 48px;
            height: 48px;
            border: 3px solid var(--border);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin: 0 auto 16px;
        }

        .loading p {
            color: var(--text-muted);
            font-size: 14px;
        }

        .loading .progress-text {
            font-size: 12px;
            margin-top: 8px;
            color: var(--primary);
        }

        /* Result Section */
        .result-card {
            margin-top: 32px;
            display: none;
            animation: fadeInUp 0.5s ease-out;
        }

        .result-card.show {
            display: block;
        }

        .result-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border);
        }

        .result-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--success), #16a34a);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
        }

        .result-header h3 {
            font-size: 18px;
            font-weight: 700;
        }

        .result-header span {
            font-size: 12px;
            color: var(--text-muted);
        }

        /* Roadmap Sections */
        .roadmap-section {
            background: var(--surface-elevated);
            border-radius: 14px;
            padding: 20px;
            margin-bottom: 16px;
            border-right: 4px solid var(--primary);
            animation: slideIn 0.4s ease-out both;
        }

        .roadmap-section:nth-child(2) { border-color: #8b5cf6; animation-delay: 0.1s; }
        .roadmap-section:nth-child(3) { border-color: #a78bfa; animation-delay: 0.2s; }
        .roadmap-section:nth-child(4) { border-color: #c4b5fd; animation-delay: 0.3s; }
        .roadmap-section:nth-child(5) { border-color: #f472b6; animation-delay: 0.4s; }
        .roadmap-section:nth-child(6) { border-color: #fb7185; animation-delay: 0.5s; }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
        }

        .section-number {
            width: 28px;
            height: 28px;
            background: var(--primary);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 13px;
            font-weight: 700;
        }

        .section-title {
            font-size: 15px;
            font-weight: 600;
            color: var(--text);
        }

        .section-content {
            font-size: 13px;
            line-height: 1.8;
            color: var(--text-muted);
        }

        .section-content ul {
            padding-right: 16px;
            margin: 10px 0;
        }

        .section-content li {
            margin: 6px 0;
        }

        .section-content strong {
            color: var(--primary);
        }

        .section-content .tip {
            background: rgba(139, 92, 246, 0.1);
            border-radius: 8px;
            padding: 10px 12px;
            margin-top: 10px;
            font-size: 12px;
            border-right: 3px solid var(--accent);
        }

        .section-content .tip::before {
            content: "ğŸ’¡ ";
        }

        /* Footer */
        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 24px;
            border-top: 1px solid var(--border);
        }

        .footer p {
            color: var(--text-muted);
            font-size: 12px;
            font-weight: 300;
        }

        /* Animations */
        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @media (max-width: 480px) {
            .container { padding: 16px 14px 50px; }
            .header h1 { font-size: 22px; }
            .form-card, .result-card { padding: 18px; }
        }
    </style>
</head>
<body>
    <div class="bg-pattern"></div>
    
    <div class="container">
        <div class="header">
            <div class="logo">ğŸ¹</div>
            <h1>Ø±ÙˆØ¯Ù…Ù¾ ØªØ®ØµØµÛŒ Ø¢Ù‡Ù†Ú¯Ø³Ø§Ø²ÛŒ</h1>
            <p>Ù…Ø³ÛŒØ± Ø§Ø®ØªØµØ§ØµÛŒ ØªÙˆ Ø±Ùˆ Ø¨Ø³Ø§Ø²</p>
        </div>

        <div class="form-card" id="formCard">
            <div class="input-group">
                <label>Ø³Ø¨Ú© Ù…ÙˆØ³ÛŒÙ‚ÛŒ <span class="required">*</span></label>
                <select id="style" required>
                    <option value="" disabled selected>Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯...</option>
                    <option value="electronic">Ø§Ù„Ú©ØªØ±ÙˆÙ†ÛŒÚ© / EDM</option>
                    <option value="techno">ØªÚ©Ù†Ùˆ</option>
                    <option value="hip-hop">Ù‡ÛŒÙ¾â€ŒÙ‡Ø§Ù¾ / Ø¨ÛŒØªâ€ŒÙ…ÛŒÚ©ÛŒÙ†Ú¯</option>
                    <option value="pop">Ù¾Ø§Ù¾</option>
                    <option value="rock">Ø±Ø§Ú©</option>
                    <option value="rnb">Ø¢Ø±&Ø¨ÛŒ</option>
                    <option value="jazz">Ø¬Ø§Ø²</option>
                    <option value="classical">Ú©Ù„Ø§Ø³ÛŒÚ©</option>
                    <option value="ambient">Ø¢Ù…Ø¨ÛŒÙ†Øª / Ø¯Ø±ÛŒÙ…ÛŒÙ†Ú¯</option>
                    <option value="metal">Ù…ØªØ§Ù„</option>
                </select>
                <p class="input-hint">Ø³Ø¨Ú©ÛŒ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ Ø¯Ø± Ø§ÙˆÙ† Ù…ØªØ®ØµØµ Ø¨Ø´ÛŒ</p>
            </div>

            <div class="input-group">
                <label>Ø³Ø·Ø­ ØªØ¬Ø±Ø¨Ù‡ <span class="required">*</span></label>
                <select id="experience" required>
                    <option value="" disabled selected>Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯...</option>
                    <option value="complete-beginner">Ù…Ø¨ØªØ¯ÛŒ Ú©Ø§Ù…Ù„ (ØµÙØ± ØªØ§ Û¶ Ù…Ø§Ù‡)</option>
                    <option value="beginner">Ø¢Ø´Ù†Ø§ Ø¨Ù‡ Ù…Ø¨Ø§Ù†ÛŒ (Û¶ Ù…Ø§Ù‡ ØªØ§ Û± Ø³Ø§Ù„)</option>
                    <option value="intermediate">Ù…ØªÙˆØ³Ø· (Û± ØªØ§ Û³ Ø³Ø§Ù„)</option>
                    <option value="advanced">Ù¾ÛŒØ´Ø±ÙØªÙ‡ (Û³ ØªØ§ Ûµ Ø³Ø§Ù„)</option>
                    <option value="professional">Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ (Ûµ+ Ø³Ø§Ù„)</option>
                </select>
                <p class="input-hint">Ú†Ù‚Ø¯Ø± ØªØ¬Ø±Ø¨Ù‡ Ø¯Ø§Ø±ÛŒØŸ</p>
            </div>

            <div class="input-group">
                <label>Ù‡Ø¯Ù Ù†Ù‡Ø§ÛŒÛŒ <span class="required">*</span></label>
                <select id="goal" required>
                    <option value="" disabled selected>Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯...</option>
                    <option value="produce-music">ØªÙˆÙ„ÛŒØ¯ Ù…ÙˆØ³ÛŒÙ‚ÛŒ Ø´Ø®ØµÛŒ</option>
                    <option value="release-music">Ø§Ù†ØªØ´Ø§Ø± Ù…ÙˆØ³ÛŒÙ‚ÛŒ Ø¯Ø± Ø§Ø³Ù¾Ø§ØªÛŒÙØ§ÛŒ</option>
                    <option value="produce-for-others">ØªÙˆÙ„ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø¯ÛŒÚ¯Ø±Ø§Ù†</option>
                    <option value="beatmaking">Ø¨ÛŒØªâ€ŒÙ…ÛŒÚ©ÛŒÙ†Ú¯ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ</option>
                    <option value="learn-instrument">ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ù†ÙˆØ§Ø²Ù†Ø¯Ú¯ÛŒ</option>
                    <option value="sound-engineer">Ù…Ù‡Ù†Ø¯Ø³ÛŒ ØµØ¯Ø§</option>
                    <option value="dj">Ø¯ÛŒâ€ŒØ¬ÛŒ</option>
                </select>
                <p class="input-hint">Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ Ø¨Ù‡ Ú©Ø¬Ø§ Ø¨Ø±Ø³ÛŒØŸ</p>
            </div>

            <div class="input-group">
                <label>Ø²Ù…Ø§Ù† Ø±ÙˆØ²Ø§Ù†Ù‡ <span class="required">*</span></label>
                <select id="time" required>
                    <option value="" disabled selected>Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯...</option>
                    <option value="30min">Ù†ÛŒÙ… Ø³Ø§Ø¹Øª</option>
                    <option value="1hour">Û± Ø³Ø§Ø¹Øª</option>
                    <option value="2hours">Û² Ø³Ø§Ø¹Øª</option>
                    <option value="3hours">Û³ Ø³Ø§Ø¹Øª</option>
                    <option value="4+hours">Û´+ Ø³Ø§Ø¹Øª</option>
                </select>
                <p class="input-hint">Ú†Ù‚Ø¯Ø± ÙˆÙ‚Øª Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ø±ÙˆØ²Ø§Ù†Ù‡ Ø¨Ø°Ø§Ø±ÛŒØŸ</p>
            </div>

            <button class="submit-btn" onclick="generateRoadmap()">
                <span>âœ¨</span>
                Ø³Ø§Ø®Øª Ø±ÙˆØ¯Ù…Ù¾ Ø§Ø®ØªØµØ§ØµÛŒ
            </button>
        </div>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Ø¯Ø± Ø­Ø§Ù„ Ø³Ø§Ø®Øª Ø±ÙˆØ¯Ù…Ù¾ Ø§Ø®ØªØµØ§ØµÛŒ...</p>
            <p class="progress-text">Ø§ÛŒÙ† Ú©Ù…ÛŒ Ø·ÙˆÙ„ Ù…ÛŒâ€ŒÚ©Ø´Ù‡</p>
        </div>

        <div class="result-card" id="result">
            <div class="result-header">
                <div class="result-icon">âœ“</div>
                <div>
                    <h3>Ø±ÙˆØ¯Ù…Ù¾ Ø´Ù…Ø§ Ø¢Ù…Ø§Ø¯Ù‡!</h3>
                    <span>Ù…Ø³ÛŒØ± Û¶ Ù…Ø±Ø­Ù„Ù‡â€ŒØ§ÛŒ</span>
                </div>
            </div>
            <div id="roadmapContent"></div>
        </div>

        <div class="footer">
            <p>Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ Ø¨Ø§ â™¥ Ø¨Ø±Ø§ÛŒ Ø¢Ù‡Ù†Ú¯Ø³Ø§Ø²Ø§Ù†</p>
        </div>
    </div>

    <script>
        const prompt = `You are a world-class Music Education Consultant with 25+ years of experience in music production, composition, and artist development. You've worked with major record labels and helped thousands of artists achieve their dreams.

You receive structured inputs from a user and must generate a detailed, personalized 6-stage roadmap.

USER INPUTS:
- Music Style: {{STYLE}}
- Experience Level: {{EXPERIENCE}}
- Goal: {{GOAL}}
- Daily Time: {{TIME}}

CONTEXT:
This is a personalized roadmap for someone at their specific level who wants to achieve a specific goal in a specific genre. They have limited time each day.

YOUR TASK:
Generate a comprehensive 6-stage roadmap with these sections:

## Stage 1: Foundation (Ù‡ÙØªÙ‡ Û±-Û²)
- Core skills to master
- Essential knowledge
- Tools & software basics
- Daily practice routine

## Stage 2: Skill Building (Ù‡ÙØªÙ‡ Û³-Û´)
- Intermediate techniques
- Genre-specific knowledge
- Practice exercises
- Project work

## Stage 3: Technique Mastery (Ù‡ÙØªÙ‡ Ûµ-Û¶)
- Advanced techniques
- Style-specific skills
- Production workflows
- Quality benchmarks

## Stage 4: Real-World Practice (Ù‡ÙØªÙ‡ Û·-Û¸)
- Building actual tracks
- Collaboration
- Getting feedback
- Iterating

## Stage 5: Portfolio Development (Ù‡ÙØªÙ‡ Û¹-Û±Û°)
- Creating release-ready tracks
- Branding
- Positioning
- Building presence

## Stage 6: Launch & Growth (Ù‡ÙØªÙ‡ Û±Û±-Û±Û²)
- Release strategy
- Marketing basics
- Audience building
- Next steps

REQUIREMENTS:
1. Write entirely in Persian (Farsi) with Persian headings
2. Each stage must include: title, description, specific tasks, recommended resources
3. Time recommendation must match their daily time input
4. Content must match their experience level (don't suggest advanced stuff to beginners)
5. Include specific tool names, YouTube channels, courses
6. Add tips specific to their genre/style
7. Make it actionable with daily/weekly tasks

Format: Use clear sections with emojis. Make it inspiring but realistic.`;

        function getStyleName(value) {
            const names = {
                'electronic': 'Ø§Ù„Ú©ØªØ±ÙˆÙ†ÛŒÚ© / EDM',
                'techno': 'ØªÚ©Ù†Ùˆ',
                'hip-hop': 'Ù‡ÛŒÙ¾â€ŒÙ‡Ø§Ù¾',
                'pop': 'Ù¾Ø§Ù¾',
                'rock': 'Ø±Ø§Ú©',
                'rnb': 'Ø¢Ø±&Ø¨ÛŒ',
                'jazz': 'Ø¬Ø§Ø²',
                'classical': 'Ú©Ù„Ø§Ø³ÛŒÚ©',
                'ambient': 'Ø¢Ù…Ø¨ÛŒÙ†Øª',
                'metal': 'Ù…ØªØ§Ù„'
            };
            return names[value] || value;
        }

        function getExperienceName(value) {
            const names = {
                'complete-beginner': 'Ù…Ø¨ØªØ¯ÛŒ Ú©Ø§Ù…Ù„',
                'beginner': 'Ø¢Ø´Ù†Ø§ Ø¨Ù‡ Ù…Ø¨Ø§Ù†ÛŒ',
                'intermediate': 'Ù…ØªÙˆØ³Ø·',
                'advanced': 'Ù¾ÛŒØ´Ø±ÙØªÙ‡',
                'professional': 'Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ'
            };
            return names[value] || value;
        }

        function getGoalName(value) {
            const names = {
                'produce-music': 'ØªÙˆÙ„ÛŒØ¯ Ù…ÙˆØ³ÛŒÙ‚ÛŒ Ø´Ø®ØµÛŒ',
                'release-music': 'Ø§Ù†ØªØ´Ø§Ø± Ø¯Ø± Ø§Ø³Ù¾Ø§ØªÛŒÙØ§ÛŒ',
                'produce-for-others': 'ØªÙˆÙ„ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø¯ÛŒÚ¯Ø±Ø§Ù†',
                'beatmaking': 'Ø¨ÛŒØªâ€ŒÙ…ÛŒÚ©ÛŒÙ†Ú¯',
                'learn-instrument': 'ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ù†ÙˆØ§Ø²Ù†Ø¯Ú¯ÛŒ',
                'sound-engineer': 'Ù…Ù‡Ù†Ø¯Ø³ÛŒ ØµØ¯Ø§',
                'dj': 'Ø¯ÛŒâ€ŒØ¬ÛŒ'
            };
            return names[value] || value;
        }

        function getTimeName(value) {
            const names = {
                '30min': 'Ù†ÛŒÙ… Ø³Ø§Ø¹Øª',
                '1hour': 'Û± Ø³Ø§Ø¹Øª',
                '2hours': 'Û² Ø³Ø§Ø¹Øª',
                '3hours': 'Û³ Ø³Ø§Ø¹Øª',
                '4+hours': 'Û´+ Ø³Ø§Ø¹Øª'
            };
            return names[value] || value;
        }

        async function generateRoadmap() {
            const style = document.getElementById('style').value;
            const experience = document.getElementById('experience').value;
            const goal = document.getElementById('goal').value;
            const time = document.getElementById('time').value;

            if (!style || !experience || !goal || !time) {
                alert('Ù„Ø·ÙØ§Ù‹ Ù‡Ù…Ù‡ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø§Ù„Ø²Ø§Ù…ÛŒ Ø±Ùˆ Ù¾Ø± Ú©Ù†ÛŒØ¯!');
                return;
            }

            document.getElementById('formCard').style.display = 'none';
            document.getElementById('loading').classList.add('show');

            let finalPrompt = prompt
                .replace('{{STYLE}}', getStyleName(style))
                .replace('{{EXPERIENCE}}', getExperienceName(experience))
                .replace('{{GOAL}}', getGoalName(goal))
                .replace('{{TIME}}', getTimeName(time));

            try {
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 15000); // 15 second client timeout
                
                const response = await fetch('/api/ai', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prompt: finalPrompt }),
                    signal: controller.signal
                });
                
                clearTimeout(timeoutId);

                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({}));
                    throw new Error(errorData.message || errorData.error || `Ø®Ø·Ø§ÛŒ Ø³Ø±ÙˆØ±: ${response.status}`);
                }

                const data = await response.json();
                const content = data.response || data.message || 'Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ù¾Ø§Ø³Ø®';
                
                renderRoadmap(content);
            } catch (error) {
                document.getElementById('loading').classList.remove('show');
                document.getElementById('result').classList.add('show');
                
                let errorMessage = error.message;
                if (error.name === 'AbortError') {
                    errorMessage = 'Ø²Ù…Ø§Ù† Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ø³ÛŒØ¯. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.';
                }
                
                document.getElementById('roadmapContent').innerHTML = `
                    <p style="color: var(--error);">Ø®Ø·Ø§: ${errorMessage}</p>
                    <p style="color: var(--text-muted); margin-top: 10px;">Ù„Ø·ÙØ§Ù‹ API key Ø±Ø§ Ø¯Ø± ØªÙ†Ø¸ÛŒÙ…Ø§Øª Vercel Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯</p>
                `;
            }
        }

        function renderRoadmap(content) {
            document.getElementById('loading').classList.remove('show');
            document.getElementById('result').classList.add('show');
            
            // Split content by stages and render
            const sections = content.split(/##\s+/).filter(s => s.trim());
            
            let html = '';
            sections.forEach((section, index) => {
                if (section.toLowerCase().includes('stage')) {
                    const parts = section.split('\n');
                    const title = parts[0].trim();
                    const body = parts.slice(1).join('\n');
                    
                    html += `
                        <div class="roadmap-section">
                            <div class="section-header">
                                <div class="section-number">${index + 1}</div>
                                <div class="section-title">${title}</div>
                            </div>
                            <div class="section-content">${formatContent(body)}</div>
                        </div>
                    `;
                }
            });
            
            if (!html) {
                // If no stage splitting worked, just show content
                html = `<div class="roadmap-section">
                    <div class="section-content">${formatContent(content)}</div>
                </div>`;
            }
            
            document.getElementById('roadmapContent').innerHTML = html;
        }

        function formatContent(text) {
            return text
                .replace(/## /g, '<h4>')
                .replace(/\n## /g, '</h4><h4>')
                .replace(/\n/g, '<br>')
                .replace(/<br>- /g, '<br>â€¢ ')
                .replace(/- /g, 'â€¢ ');
        }
    </script>
</body>
</html>
